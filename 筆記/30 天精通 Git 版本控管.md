# 30 天精通 Git 版本控管

主要專注於「如何在 30 天內學會 Git 版本控管，而且必須要能熟練的應用在實務開發工作上」。

## 學習的方法

* 透過下指令的方式學習，不要跳過這一段
* 找多一點人跟你一起學 Git 版本控管，直接用在實務的開發工作上
* 團隊要有幾個先遣部隊
* 每個人都有一份完整的儲存庫，必須經常合併檔案
* 分支與合併是常態，但有合併，就會有衝突，要學會如何解決衝突

> 後面就是一些介紹性文章

## 建立儲存庫

Git 儲存庫（Git Repository）的建立：

* 本機本地
* 本機共用
* 平台遠端

本機共用 `git init --bare` 要特別注意，這個資料夾不能直接拿來做開發用途，只能用來儲存 Git 的相關資訊。

> 講到本機共用就有點不了解其特別之處，但後面一講到平台遠端和本機共用就大約知道兩個相同。

> 本機共用簡單來講就是平台遠端減去本機本地再減去遠端連線。



## 常用的 Git 版本控管指令

將講新增、刪除、重新命名檔案，提交變更（建立新版本）、查詢歷史紀錄。

「紅色」代表 Untracked （未追蹤）的檔案，也就是這些變更都不會進入版本控管。

`[master +10 ~0 -0 !]`

* +10 代表有 10 個「新增」的檔案
* ~0 代表有 0 個「修改」的檔案
* -0 代表有 0 個「刪除」的檔案

新增檔案到 Git 版本控管：

`git add .`

> 上面指令會自動將所有檔案（含子目錄的檔案）加入到工作目錄索引中。

此時沒有位何版本，只是告知 Git 這些檔案「即將」被加入 Git 版本庫而已。

「緣色」代表 Staged （準備好）的檔案，也就是這些變更才會進入版本控管。

> 當檔案加入後，會連檔案資料夾一起加入，所以數量會增加。

### 提交變更/建立版本

`git commit`
`git commit -m`

> `git commit` 會跳出視窗。



### 查詢歷史紀錄

`git log`

越來越多時可以使用數字限定最近幾筆記錄：

`git log -10`



#### 刪除檔案/更名

`git rm 'NAME'`

`git rm 'NAME'`

> 要特別注意刪除

> 後面還要講到還原、重置、顯示這幾個指令，有點不想看所以先跳過。



## 了解儲存庫、工作目錄、物件與索引之的關係

### 了解儲存庫

英文 Repository 可說成版本庫或儲存庫，用來儲存所有版本的一個空間或一個資料夾與一堆檔案。

> `.git`檔案夾就是儲存庫



### 了解工作目錄

> 就是 `.git`資料夾所在地

### 

### 了解 Git 的資料結構

「物件」與「索引」

> 物件：保存版本庫中所有檔案與版本紀錄
>
> 索引：保存當下要進版本庫之前的目錄狀態

#### 關於物件

> 簡單來說就是 SHA1 雜湊名檔案

所有要進行控管的目錄與檔案，都會先區分「目錄資訊」與「檔案內容」，稱為 tree 物件與 blob 物件。

blob 就是把原本的「檔案內容」當成 blob 檔案內容（blob 物件其實就是一個實體檔案），blob 物件是一個「只有內容」的檔案，其檔名又是由內容產生的。

tree 物件其實就是「資料夾」的代名詞。

物件都會儲存在一個所謂的「物件儲存區」之中，預設就在「儲存庫」（`.git`）的 objects 目錄下。

#### 關於索引

經常異動的暫存檔。（通常位於 `.git` 下的 index 檔案）。

> 簡單來說開發時，在工作目錄建立儲存庫，之後工作，接著因為有異動，所以暫時地有索引，更新完索引就代表狀態以成為了物件而存在儲存庫。



## 解析 Git 資料結構 - 物件結構

### 物件的類型

1. blob 物件

   就是檔案「內容」，其它就是 tree 物件。

2. tree 物件

   > 有點像 link （連接器）

3. commit 物件

   > 都和提交有關

4. tag 物件

   > 是一個容器，額外資訊、tag相關

> 影片除了 tag 沒實作，其它都實作了，算是清楚。



## 解析 Git 資料結構 - 索引結構

索引別名：

* Index（索引）
* Cache（快取）
* Directory cache（目錄快取）
* Current directory cache（當前目錄快取）
* Staging area（等待被 commit 的地方）
* Staged files（等待被 commit 的檔案）

指令 `git diff —cached` 與 `git diff —staged` 同義。



### 操作索引的指令

四種檔案狀態：

* untracked（未追蹤的，代表尚未被加入 Git 儲存庫的檔案狀態）
* unmodified（未修改的，代表檔案第一次被加入，或是檔案內容與 HEAD 內容一致的狀態）
* modified（已修改的，代表檔案已經被編輯過，或是檔案內容與 HEAD 內容不一致的狀態）
* staged（等待被 commit 的，代表下次執行 git commit 會將這些檔案全部送入版本庫）



`git status` 指令，是顯示出 **目前最新版** 與 **索引檔** 之間的差異。



> 又有影片 good



> 雖然有影片，但覺得影片中的圖片有點奇怪，所以只要聽內容就可以了。



## 關於分支的基本觀念與使用方式

分支是為了解決開發過程中版本衝突的問題。

> 但不分支回產生無形的衝突，像是檔案蓋掉。



> 這一章主要是分支的建立、切換、顯示。當 SourceTree 開啟時，前面不懂的內容就一下就懂了。



## 比對檔案與版本差異

> 檔案的比較，紹介指令，有那些需要比較一類的。



## 認識 Git 物件的絕對名稱

> 主要是認識 commit 的絕對名稱



> 內容有點些，主要是 commit 的名稱呼叫方法



## 認識 Git 物件的一般參照與符號參照

參照名稱簡單來說就是 Git 物件的一個「指標」或稱「好記名稱」。用預先定義或自行定義的名稱來代表某一個 Git 物件。

分支名稱就是一個「參照名稱」。

> 簡單來說就是在「參照名稱（ref）」這個資料夾中增加一個名稱（或是檔案），之後連接需要連接的 commit。



> 沒仔細看，有空再看。



## 認識 Git 物件的相對名稱

透過「相對名稱」找到特定 commit 後，用相對位置來找其他的 commit 物件。

特殊符號 `^` 和 `~` 。

> 這一章需要圖片會比較好理解。看不太懂他在講什麼。



## 暫存工作目錄與索引的變更狀態

`git stash`

> 覺得要實作才比較清楚。

> 實作完覺得很實用，但目前用不到。



## Git for Windows 選項設定

> 沒什麼看，主要是用來自動化。



## 標籤 - 標記版本控制過程中的重要事件

就是以一個「好記的名稱」來幫助我們記憶版本。

有兩種：

* 輕量標籤（lightweight tag）
* 標示標籤（annotated tag）

> 一般參照那章中的標籤名稱就是所謂的輕量標籤。所以是某個 commit 的別名，相對名稱。



標示標籤就是一種物件。

> 這一章上面的部分看的懂，但後面的章節中不清楚在幹嘛了。



## 善用版本日誌 git reflog 追蹤變更軌跡

> 記住 `git reset "HEAD{1}" --hard` 它可以把上一個做錯的動作取銷掉。



> 非常實用的一章，可以防止手殘XDDDD



## 關於合併的基本觀念與使用方式

### 關於「合併」的基本觀念

> 誤刪分支需要用 `git branch NAME<SHA1>` 名字的部分用 SHA1 而且需要找到誤刪的最後一個版本（用 `git reflog` 找）



> 關於衝突，作者的處理方法是用 gui 工具來解決問題，如果沒有用 gui 的話，就得手動刪除衝突（大概，說不定後面會教XDDD）



## 修正 commit 過的版本歷史紀錄 part 1

http://ithelp.ithome.com.tw/articles/10138791 就到這裡！！